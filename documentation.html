<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>order_api documentation</title>

    <style>
        main {
            width: 960px;
            margin: 20px auto;
            font-family: sans-serif;
        }

        pre {
            background: #ACE;
            border-left: 3px solid #57C;
            padding: 10px;
            box-sizing: border-box;
        }
    </style>
</head>
<body>

<main>
    <header>
        <h1>order_api documentation</h1>
    </header>

    <article>
        <section id="toc">
            <ol>
                <li>
                    <a href="#apikeys">API keys</a>
                </li>
                <li>
                    <a href="#products">Products</a>
                </li>
                <li>
                    <a href="#orders">Orders</a>
                </li>
                <li>
                    <a href="#order_items">Order items</a>
                </li>
                <li>
                    <a href="#deliveries">Deliveries</a>
                </li>
                <li>
                    <a href="#invoices">Invoices and Login</a>
                </li>
                <li>
                    <a href="#copier">Copier</a>
                </li>
                <li>
                    <a href="#installation">Local Installation</a>
                </li>
            </ol>


        </section>

        <section id="apikeys">
            <h2>API keys</h2>
            <p><strong>To request an API key:</strong></p>
            <pre>GET /api-key?email=[YOUR_EMAIL]</pre>
            <p>Result:</p>
            <pre>{
    "data": {
        "key": "6eae78f64e3b6b9bfb2e3904469e8c30"
    }
}</pre>
            <p>Errors:</p>
            <pre>{
    "data": {
        "message": "Email address already used for api key.",
        "api_key": "1bdd5c943e664d399f2a298fca0dabfd"
    }
}</pre>

            <p><strong>An API key is required for all requests except the following:</strong></p>
            <pre>GET /</pre>
            <pre>GET /api-key?email=[YOUR_EMAIL]</pre>
            <p>If an API key is not provided the following error is given:</p>
            <pre>{
    "errors": {
        "status": 401,
        "source": "/products",
        "title": "Valid API key",
        "detail": "No valid API key provided."
    }
}</pre>
        </section>

        <section id="products">
            <h2>Products</h2>
            <p><strong>To get all your products:</strong></p>
            <pre>GET /products?api_key=[YOUR_API_KEY]</pre>
            <p>Result:</p>
            <pre>{
    "data": [
        {
            "id": 1,
            "article_number": "1214-RNT",
            "name": "Skruv M14",
            "description": "Skruv M14, värmförsinkad",
            "specifiers": "{'length' : '60mm', 'width' : '14mm'}",
            "stock": 12,
            "location": "A1B4",
            "price": 10
        },
        {
            "id": 2,
            "article_number": "1212-RNT",
            "name": "Skruv M12",
            "description": "Skruv M12, värmförsinkad",
            "specifiers": "{'length' : '60mm', 'width' : '12mm'}",
            "stock": 14,
            "location": "A1B5",
            "price": 10
        },
        {
            "id": 3,
            "article_number": "1210-RNT",
            "name": "Skruv M10",
            "description": "Skruv M10, värmförsinkad",
            "specifiers": "{'length' : '60mm', 'width' : '10mm'}",
            "stock": 20,
            "location": "A1B6",
            "price": 10
        },
        {
            "id": 4,
            "article_number": "1208-RNT",
            "name": "Skruv M8",
            "description": "Skruv M8, värmförsinkad",
            "specifiers": "{'length' : '60mm', 'width' : '8mm'}",
            "stock": 2,
            "location": "A1B7",
            "price": 10
        },
        {
            "id": 5,
            "article_number": "1206-RNT",
            "name": "Skruv M6",
            "description": "Skruv M6, värmförsinkad",
            "specifiers": "{'length' : '60mm', 'width' : '6mm'}",
            "stock": 6,
            "location": "A1B8",
            "price": 10
        },
        {
            "id": 6,
            "article_number": "1214-TNT",
            "name": "Mutter M14",
            "description": "Mutter M14, värmförsinkad, passar 1214-RNT",
            "specifiers": "{'diameter' : '14mm'}",
            "stock": 13,
            "location": "A1C4",
            "price": 10
        },
        {
            "id": 7,
            "article_number": "1212-TNT",
            "name": "Mutter M12",
            "description": "Mutter M12, värmförsinkad, passar 1212-RNT",
            "specifiers": "{'diameter' : '12mm'}",
            "stock": 23,
            "location": "A1C4",
            "price": 10
        },
        {
            "id": 8,
            "article_number": "1210-TNT",
            "name": "Mutter M10",
            "description": "Mutter M10, värmförsinkad, passar 1210-RNT",
            "specifiers": "{'diameter' : '10mm'}",
            "stock": 12,
            "location": "A1C4",
            "price": 10
        },
        {
            "id": 9,
            "article_number": "1208-TNT",
            "name": "Mutter M8",
            "description": "Mutter M8, värmförsinkad, passar 1208-RNT",
            "specifiers": "{'diameter' : '8mm'}",
            "stock": 4,
            "location": "A1C4",
            "price": 10
        },
        {
            "id": 10,
            "article_number": "1206-TNT",
            "name": "Mutter M6",
            "description": "Mutter M6, värmförsinkad, passar 1206-RNT",
            "specifiers": "{'diameter' : '6mm'}",
            "stock": 1,
            "location": "A1C4",
            "price": 10
        }
    ]
}</pre>

            <p><strong>To get a specific product:</strong></p>
            <pre>GET /product/:product_id?api_key=[YOUR_API_KEY]</pre>
            <p>Result:</p>
            <pre>{
    "data": {
        "id": 1,
        "article_number": "1214-RNT",
        "name": "Skruv M14",
        "description": "Skruv M14, värmförsinkad",
        "specifiers": "{'length' : '60mm', 'width' : '14mm'}",
        "stock": 12,
        "location": "A1B4",
        "price": 10
    }
}</pre>
            <p><strong>To search for a product:</strong></p>
            <pre>GET /product/search/:query?api_key=[YOUR_API_KEY]</pre>
            <p>Result (search query was m14):</p>
            <pre>{
    "data": [
        {
            "id": 1,
            "article_number": "1214-RNT",
            "name": "Skruv M14",
            "description": "Skruv M14, värmförsinkad",
            "specifiers": "{'length' : '60mm', 'width' : '14mm'}",
            "stock": 12,
            "location": "A1B4",
            "price": 10
        },
        {
            "id": 6,
            "article_number": "1214-TNT",
            "name": "Mutter M14",
            "description": "Mutter M14, värmförsinkad, passar 1214-RNT",
            "specifiers": "{'diameter' : '14mm'}",
            "stock": 13,
            "location": "A1C4",
            "price": 10
        }
    ]
}</pre>

            <p><strong>To add a product:</strong></p>
            <pre>POST /product</pre>
            <p>Required parameters:</p>
            <pre>id
name
api_key</pre>

            <p><strong>To update a product:</strong></p>
            <pre>PUT /product</pre>
            <p>Required parameters:</p>
            <pre>id
api_key</pre>
            <p><strong>N.B.</strong> All attributes are updated, send an entire product object.</p>
            <p>Result:</p>
            <pre>HTTP Status Code 204 No Content</pre>
            <p>Possible error, besides errors returned from database:</p>
            <pre>{
    "errors": {
        "status": 400,
        "detail": "Required attribute product id (id) was not included in the request."
    }
}</pre>

            <p><strong>To delete a product:</strong></p>
            <pre>DELETE /product</pre>
            <p>Required parameters:</p>
            <pre>id
api_key</pre>
            <p>Result:</p>
            <pre>HTTP Status Code 204 No Content</pre>
            <p>Possible error, besides errors returned from database:</p>
            <pre>{
    "errors": {
        "status": 400,
        "detail": "Required attribute product id (id) was not included in the request."
    }
}</pre>
        </section>

        <section id="orders">
            <h2>Orders</h2>
            <p><strong>To get all your orders and associated order items:</strong></p>
            <pre>GET /orders?api_key=[YOUR_API_KEY]</pre>
            <p>Result:</p>
            <pre>{
    "data": [
        {
            "id": 1,
            "name": "Anders Andersson",
            "address": "Andersgatan 1",
            "zip": "12345",
            "city": "Anderstorp",
            "country": "Sweden",
            "status": "Ny",
            "order_items": [
                {
                    "product_id": 1,
                    "amount": 2,
                    "article_number": "1214-RNT",
                    "name": "Skruv M14",
                    "description": "Skruv M14, värmförsinkad",
                    "specifiers": "{'length' : '60mm', 'width' : '14mm'}",
                    "stock": 12,
                    "location": "A1B4",
                    "price": 10
                },
                {
                    "product_id": 2,
                    "amount": 3,
                    "article_number": "1212-RNT",
                    "name": "Skruv M12",
                    "description": "Skruv M12, värmförsinkad",
                    "specifiers": "{'length' : '60mm', 'width' : '12mm'}",
                    "stock": 14,
                    "location": "A1B5",
                    "price": 10
                }
            ]
        },
        {
            "id": 2,
            "name": "Bengt Bengtsson",
            "address": "Bengtsgatan 2",
            "zip": "23457",
            "city": "Bengtfors",
            "country": "Sweden",
            "status": "Ny",
            "order_items": [
                {
                    "product_id": 3,
                    "amount": 4,
                    "article_number": "1210-RNT",
                    "name": "Skruv M10",
                    "description": "Skruv M10, värmförsinkad",
                    "specifiers": "{'length' : '60mm', 'width' : '10mm'}",
                    "stock": 20,
                    "location": "A1B6",
                    "price": 10
                }
            ]
        },
        {
            "id": 3,
            "name": "Carl Carlsson",
            "address": "Carlsgatan 3",
            "zip": "34567",
            "city": "Karlstad",
            "country": "Sweden",
            "status": "Ny",
            "order_items": [
                {
                    "product_id": 6,
                    "amount": 5,
                    "article_number": "1214-TNT",
                    "name": "Mutter M14",
                    "description": "Mutter M14, värmförsinkad, passar 1214-RNT",
                    "specifiers": "{'diameter' : '14mm'}",
                    "stock": 13,
                    "location": "A1C4",
                    "price": 10
                }
            ]
        },
        {
            "id": 4,
            "name": "David Davidsson",
            "address": "Davidsallén 4",
            "zip": "45678",
            "city": "Davidstorp",
            "country": "Sweden",
            "status": "Ny",
            "order_items": [
                {
                    "product_id": 8,
                    "amount": 6,
                    "article_number": "1210-TNT",
                    "name": "Mutter M10",
                    "description": "Mutter M10, värmförsinkad, passar 1210-RNT",
                    "specifiers": "{'diameter' : '10mm'}",
                    "stock": 12,
                    "location": "A1C4",
                    "price": 10
                }
            ]
        }
    ]
}</pre>

            <p><strong>To get a specific order and associated order items:</strong></p>
            <pre>GET /order/:order_id?api_key=[YOUR_API_KEY]</pre>
            <p>Result:</p>
            <pre>{
    "data": {
        "id": 1,
        "name": "Anders Andersson",
        "address": "Andersgatan 1",
        "zip": "12345",
        "city": "Anderstorp",
        "country": "Sweden",
        "status": "Ny",
        "order_items": [
            {
                "product_id": 1,
                "amount": 2,
                "article_number": "1214-RNT",
                "name": "Skruv M14",
                "description": "Skruv M14, värmförsinkad",
                "specifiers": "{'length' : '60mm', 'width' : '14mm'}",
                "stock": 12,
                "location": "A1B4",
                "price": 10
            },
            {
                "product_id": 2,
                "amount": 3,
                "article_number": "1212-RNT",
                "name": "Skruv M12",
                "description": "Skruv M12, värmförsinkad",
                "specifiers": "{'length' : '60mm', 'width' : '12mm'}",
                "stock": 14,
                "location": "A1B5",
                "price": 10
            }
        ]
    }
}</pre>
            <p><strong>To search for an order and associated order items:</strong></p>
            <p>
                You can search on the following parameters: name, address, zip, city and country.
            </p>
            <pre>GET /order/search/:query?api_key=[YOUR_API_KEY]</pre>
            <p>Result (search query was anders):</p>
            <pre>{
    "data": [
        {
            "id": 1,
            "name": "Anders Andersson",
            "address": "Andersgatan 1",
            "zip": "12345",
            "city": "Anderstorp",
            "country": "Sweden",
            "status": "Ny",
            "order_items": [
                {
                    "product_id": 1,
                    "amount": 2,
                    "article_number": "1214-RNT",
                    "name": "Skruv M14",
                    "description": "Skruv M14, värmförsinkad",
                    "specifiers": "{'length' : '60mm', 'width' : '14mm'}",
                    "stock": 12,
                    "location": "A1B4",
                    "price": 10
                },
                {
                    "product_id": 2,
                    "amount": 3,
                    "article_number": "1212-RNT",
                    "name": "Skruv M12",
                    "description": "Skruv M12, värmförsinkad",
                    "specifiers": "{'length' : '60mm', 'width' : '12mm'}",
                    "stock": 14,
                    "location": "A1B5",
                    "price": 10
                }
            ]
        }
    ]
}</pre>

            <p><strong>To add an order:</strong></p>
            <pre>POST /order</pre>
            <p>Required parameters:</p>
            <pre>id
name
api_key</pre>

            <p><strong>To update an order:</strong></p>
            <pre>PUT /order</pre>
            <p>Required parameters:</p>
            <pre>id
api_key</pre>
            <p><strong>N.B.</strong> All attributes are updated, send an entire order object.</p>
            <p>Result:</p>
            <pre>HTTP Status Code 204 No Content</pre>
            <p>Possible error, besides errors returned from database:</p>
            <pre>{
    "errors": {
        "status": 400,
        "detail": "Required attribute product id (id) was not included in the request."
    }
}</pre>

            <p><strong>To delete an order and associated order items:</strong></p>
            <pre>DELETE /order</pre>
            <p>Required parameters:</p>
            <pre>id
api_key</pre>
            <p>Result:</p>
            <pre>HTTP Status Code 204 No Content</pre>
            <p>Possible error, besides errors returned from database:</p>
            <pre>{
    "errors": {
        "status": 400,
        "detail": "Required attribute product id (id) was not included in the request."
    }
}</pre>
        </section>

        <section id="order_items">
            <h2>Order items</h2>

            <p><strong>To add an order item to an order:</strong></p>
            <pre>POST /order_item</pre>
            <p>Required parameters:</p>
            <pre>order_id
product_id
amount
api_key</pre>

            <p><strong>To update an order item:</strong></p>
            <pre>PUT /order</pre>
            <p>Required parameters:</p>
            <pre>order_id
product_id
api_key</pre>
            <p><strong>N.B.</strong> All attributes are updated, send an entire order object.</p>
            <p>Result:</p>
            <pre>HTTP Status Code 204 No Content</pre>
            <p>Possible error, besides errors returned from database:</p>
            <pre>{
    "errors": {
        "status": 400,
        "detail": "Required attributes order_id and product_id was not included in the request."
    }
}</pre>

            <p><strong>To delete an order item:</strong></p>
            <pre>DELETE /order</pre>
            <p>Required parameters:</p>
            <pre>order_id
product_id
api_key</pre>
            <p>Result:</p>
            <pre>HTTP Status Code 204 No Content</pre>
            <p>Possible error, besides errors returned from database:</p>
            <pre>{
    "errors": {
        "status": 400,
        "detail": "Required attribute order id and product id was not included in the request."
    }
}</pre>
        </section>

        <section id="deliveries">
            <h2>Deliveries</h2>

        </section>

        <section id="invoices">
            <h2>Invoices and Login</h2>

        </section>

        <section id="copier">
            <h2>Copier</h2>

        </section>

        <section id="installation">
            <h2>Local Installation</h2>
            <p>To get up and running do the following:</p>
            <ol>
                <li>
                    Create the file db/orders.sqlite.
                </li>
                <li>
                    Read the db/migrate.sql file into the db/orders.sqlite db.
                </li>
                <li>
                    Optional: Read the db/seed.sql and db/status_seed.sql file into the db/orders.sqlite db.
                </li>
                <li>
                    Run: npm install
                </li>
                <li>
                    Run: npm start
                </li>
            </ol>
        </section>
    </article>
</main>
</body>
</html>
